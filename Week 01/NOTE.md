## 一、TicTacToe

### （1）介绍

这是一个包含 3x3 个格子，且连续 3 个相同的被连接就算赢的小游戏。游戏可以支持人-人、人-机对战。

### （2）主要实现思路

1. 生成 DOM 元素。
    * 先定义一个根 DOM 节点，设置其 id。在 script 中初始化一个 3x3 的二维数组。通过遍历这个二维数组，生成一个初始的棋盘。
    * 这个方法主要做的操作是：将 DOM 节点 create 出来后，设置样式和监听事件。
2. 理清思路：共有 3x3 个格子，连续 3 个就算赢。那么，做赢的判断时有两种判断方法：
   * 简单粗暴法：每次落子时， 假设为A，判断棋盘中三行、三列以及两个斜方向上是否有连续三个A或者判断是否有B。如果没有连续三个，或者有B，则说明没有赢。
   * 单个元素判断法：我们知道，只有当前落的子所组成的线才有可能赢。所以，我们可以只判断当前的落子， 假设为A，的横、竖以及两个斜向上是否有连续三个A或者判断是否有B。如果没有连续三个，或者有B，则说明没有赢。
3. 人机交互。
    * 想要实现人机交互，首先要做的就是思考，应该怎样做到人机交互？答案是，当执行完点击事件(`userMove`)后再去执行机器执行(`computerMove`)的方法。
    * 接着，我们再思考，机器怎么知道它要下哪里呢？这里我们定义一个 `bestChoice` 方法。这个方法用来查找当前用户（机器或者是人）在接下来所能到的最优的地方。
    * 那这个最优的策略/算法怎么定义呢？我们在这里做两件事情：如果有某一个位置能直接让用户赢，那就直接返回这个位置。如果没有，那就找对方的最优位置（抢占对方的最优位置）。

### 还需要改进的地方

其实从一开始，就试图让代码的可扩展性更强一些。目前代码中的 `check` 方法、`bestChoice` 方法还依赖 3x3 和连续 3 个才能赢这样一个前提。希望能不断的完善方法，使其更加的灵活。

## 二、async异步编程

### （1）介绍

这是一个简易的红绿灯，可能无限的进行下去。其中红灯 10s、黄灯 2s、绿灯 5s。

### （2）主要实现思路

1. 定义灯的颜色与停顿时间的映射关系，假设为 `colorAndLightMap`。
2. 定义两个方法，一个用来设置指定颜色、一个用来等待指定时间。
3. 启动方法。设置一个循环，遍历`colorAndLightMap`，同时调用设置颜色及时间的方法。

### （3）知识点

1. JavaScript 中的异步机制
    * `callback`
    * `Promise`：相比于 `callback`，在表现层面上，它实现了从嵌套到链式的表达。
    * `async/await`：语法层面的改进，扩展性更强。
2. 看到下面代码，`wait` 方法中通过返回一个 `Promise` 其中包含的一个 `setTimeout` 再结合调用时的 `await` 实现了在循环中停顿指定时间再继续下一轮循环这样一个功能。它的原理是：**当我们创建了一个 `Promise` 后会直接执行里面的代码，直到 `resolve` 才会认为 `promise` 结束。**
```js
function wait(duration) {
    return new Promise(function(resolve, reject) {
        setTimeout(resolve, duration);
    })
}
```

---
OS：macOS Catalina 10.15.7  
Browser Version: Chrome 87.0.4280.88（正式版本） (x86_64)